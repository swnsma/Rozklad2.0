<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">
    <services>
        <!--Subject -->
        <service id="rozklad.domain.subject.command_handler" class="Rozklad\CQRSBundle\Domain\Model\Subject\Command\Handler\SubjectCommandHandler">
            <argument type="service" id="rozklad.domain.subject.repository"/>
            <tag name="command_handler"/>
        </service>
        <service id="rozklad.domain.subject.repository" class="Rozklad\CQRSBundle\Domain\Model\Subject\SubjectRepository">
            <argument type="service" id="broadway.event_store" />
            <argument type="service" id="broadway.event_handling.event_bus" />
            <argument type="collection">
                <argument type="service" id="broadway.metadata_enriching_event_stream_decorator" />
            </argument>
        </service>

        <!--Group -->
        <service id="rozklad.domain.group.command_handler" class="Rozklad\CQRSBundle\Domain\Model\Group\Command\Handler\GroupCommandHandler">
            <argument type="service" id="rozklad.domain.group.repository"/>
            <tag name="command_handler"/>
        </service>
        <service id="rozklad.domain.group.repository" class="Rozklad\CQRSBundle\Domain\Model\Group\GroupRepository">
            <argument type="service" id="broadway.event_store" />
            <argument type="service" id="broadway.event_handling.event_bus" />
            <argument type="collection">
                <argument type="service" id="broadway.metadata_enriching_event_stream_decorator" />
            </argument>
        </service>

        <!--Teacher -->
        <service id="rozklad.domain.teacher.command_handler" class="Rozklad\CQRSBundle\Domain\Model\Teacher\Command\Handler\TeacherCommandHandler">
            <argument type="service" id="rozklad.domain.teacher.repository"/>
            <tag name="command_handler"/>
        </service>
        <service id="rozklad.domain.teacher.repository" class="Rozlkad\CQRSBundle\Domain\Model\TeacherRepository">
            <argument type="service" id="broadway.event_store" />
            <argument type="service" id="broadway.event_handling.event_bus" />
            <argument type="collection">
                <argument type="service" id="broadway.metadata_enriching_event_stream_decorator" />
            </argument>
        </service>

        <!--Chair -->
        <service id="rozklad.domain.chair.command_handler" class="Rozklad\CQRSBundle\Domain\Model\Chair\Command\Handler\ChairCommandHandler">
            <argument type="service" id="rozklad.domain.chair.repository"/>
            <tag name="command_handler"/>
        </service>
        <service id="rozklad.domain.chair.repository" class="Rozklad\CQRSBundle\Domain\Model\Chair\ChairRepository">
            <argument type="service" id="broadway.event_store" />
            <argument type="service" id="broadway.event_handling.event_bus" />
            <argument type="collection">
                <argument type="service" id="broadway.metadata_enriching_event_stream_decorator" />
            </argument>
        </service>

        <!--Semester -->
        <service id="rozklad.domain.semester.command_handler" class="Rozklad\CQRSBundle\Domain\Model\Semester\Command\Handler\SemesterCommandHandler">
            <argument type="service" id="rozklad.domain.semester.repository"/>
            <tag name="command_handler"/>
        </service>
        <service id="rozklad.domain.semester.repository" class="Rozklad\CQRSBundle\Domain\Model\Semester\SemesterRepository">
            <argument type="service" id="broadway.event_store" />
            <argument type="service" id="broadway.event_handling.event_bus" />
            <argument type="collection">
                <argument type="service" id="broadway.metadata_enriching_event_stream_decorator" />
            </argument>
        </service>

        <!--Faculty -->
        <service id="rozklad.domain.faculty.command_handler" class="Rozklad\CQRSBundle\Domain\Model\Faculty\Command\Handler\FacultyCommandHandler">
            <argument type="service" id="rozklad.domain.faculty.repository"/>
            <tag name="command_handler"/>
        </service>
        <service id="rozklad.domain.faculty.repository" class="Rozklad\CQRSBundle\Domain\Model\Faculty\FacultyRepository">
            <argument type="service" id="broadway.event_store" />
            <argument type="service" id="broadway.event_handling.event_bus" />
            <argument type="collection">
                <argument type="service" id="broadway.metadata_enriching_event_stream_decorator" />
            </argument>
        </service>
    </services>
</container>
